<link rel="import" href="../bower_components/core-elements/core-elements.html">
<link rel="import" href="../bower_components/core-signals/core-signals.html">
<link rel="import" href="../bower_components/paper-elements/paper-elements.html">
<link rel="import" href="../bower_components/polymer/polymer.html">

<polymer-element name="google-signin-dialog" attributes="">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>

    <core-signals on-core-signal-google-signin-request-signout="{{ signoutRequested }}">
    </core-signals>

    <paper-dialog heading="Sign in to Google" opened="{{ open }}"
      backdrop="true" layered="true" autoCloseDisabled="true"
    >
      <div vertical layout>
        <p>You don't need a new account to use weighty, just a Google account.</p>
        <google-signin id="signin" self-center
          clientId="266506267940-nk8rt8rdrpb8l5j098ugl2v04m6evujn.apps.googleusercontent.com"
          on-google-signin-necessary="{{ signinRequired }}"
          on-google-signin-success="{{ signinSucceeded }}"
          on-google-signed-out="{{ signinRequired }}"
        ></google-signin>
      </div>
    </paper-dialog>
  </template>
  <script>
    Polymer({
      open: false,

      signinRequired: function() {
        this.open = true;
      },

      signinSucceeded: function() {
        this.open = false;
      },

      signoutRequested: function() {
        this.$.signin.signOut();
      },
    });
  </script>
</polymer-element>
