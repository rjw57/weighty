<link rel="import" href="../bower_components/paper-elements/paper-elements.html">
<link rel="import" href="../bower_components/core-elements/core-elements.html">
<link rel="import" href="../bower_components/polymer/polymer.html">

<polymer-element name="dataset-page" attributes="weightyDataset isLoading">
  <template>
    <style>
      :host {
        display: block;
      }
      #container { overflow: auto; }
    </style>
    <div fit id="container" vertical layout>
        <template if="{{ isLoading }}">
            <div fit vertical layout center-justified>
                <div self-center>
                    <loading-throbber></loading-throbber>
                </div>
            </div>
        </template>
        <template bind="{{ weightyDataset }}" if="{{ !isLoading &amp;&amp; weightyDataset }}">
            <core-header-panel flex>
                <core-toolbar>
                    <paper-icon-button icon="arrow-back" on-tap="{{back}}"></paper-icon-button>
                    <div flex>{{ file.title }}</div>
                </core-toolbar>
                <div content vertical layout>
                    <highcharts-chart chartOptions="{{ chartOptions }}">
                        <!-- <highcharts-axis xaxis></highcharts-axis>
                        <highcharts-axis yaxis></highcharts-axis>
                        -->

                        <highcharts-series name="foo">
                            <template repeat="{{ data }}">
                                <highcharts-datum x="{{ timestamp }}" y="{{ weight }}"
                                ></highcharts-datum>
                            </template>
                        </highcharts-series>
                    </highcharts-chart>
                </div>
            </core-header-panel>
        </template>
    </div>
  </template>
  <script>
    Polymer({
        isLoading: false,
        chartOptions: {
            chart: {
              zoomType: 'x',
              spacing: [10, 0, 10, 0],
            },
            title: {
              text: null,
            },
            exporting: {
              buttons: {
                contextButton: { enabled: false },
              },
            },
            xAxis: {
              type: 'datetime',
              endOnTick: false,
              minPadding: 0,
              maxPadding: 0,
              minRange: 14 * 24 * 3600000, // fortnight
            },
            tooltip: {
              valueDecimals: 1,
              valueSuffix: 'kg',
            },
        },

        back: function() { this.fire('back'); },
    });
  </script>
</polymer-element>
