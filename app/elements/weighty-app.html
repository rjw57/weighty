<link rel="import" href="../bower_components/core-animated-pages/transitions/cascade-transition.html">
<link rel="import" href="../bower_components/core-animated-pages/transitions/hero-transition.html">
<link rel="import" href="../bower_components/core-elements/core-elements.html">
<link rel="import" href="../bower_components/google-signin/google-signin.html">
<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="dataset-list.html">

<polymer-element name="weighty-app" attributes="">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>

    <core-scaffold mode="waterfall">
      <core-header-panel navigation flex mode="seamed">
        <core-toolbar>Weighty</core-toolbar>
        <core-menu theme="core-light-theme" selected="{{ selectedPage }}">
          <core-item name="datasets" icon="drive-fusiontable" label="My Datasets"></core-item>
        </core-menu>
      </core-header-panel>

      <template if="{{ selectedPage == 'dataset' }}">
        <core-icon-button tool icon="arrow-back" on-tap="{{ back }}"></core-icon-button>
      </template>
      <div tool flex>
        <template if="{{ selectedPage == 'datasets' }}">
          My Datasets
        </template>

        <template if="{{ selectedPage == 'dataset' }}">
          <div hero hero-id="{{ datasetId }}">{{ datasetId }}</div>
        </template>
      </div>

      <google-signin
        clientId="266506267940-nk8rt8rdrpb8l5j098ugl2v04m6evujn.apps.googleusercontent.com"
      ></google-signin>

      <core-animated-pages selected="{{ selectedPage }}"
        transitions="cascade-transition hero-transition cross-fade slide-up"
      >
        <section name="datasets">
          <paper-button label="foo" cross-fade on-tap="{{ refreshDatasetList }}"></paper-button>
          <dataset-list id="datasetList" on-dataset-list-activated="{{ datasetActivated }}"
            on-dataset-list-changed="{{ datasetsLoaded }}"
          ></dataset-list>
        </section>

        <section name="dataset" slide-up>
          <div hero hero-id="{{datasetId}}">DATASET {{ datasetId }}</div>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
          <p>gllgg</p>
        </section>
      </core-animated-pages>

    </core-scaffold>
  </template>
  <script>
    Polymer({
      selectedPage: 'datasets',
      datasetId: null,

      refreshDatasetList: function() {
        this.$.datasetList.refresh();
      },

      datasetActivated: function(event, detail) {
        this.datasetId = detail;
        this.selectedPage = 'dataset';
      },

      back: function() {
        this.selectedPage = 'datasets';
      },
    });
  </script>
</polymer-element>
