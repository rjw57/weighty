<div class="loading-indicator" data-ng-show="loading">
  <p class="lead text-center">
    <strong>Loading&hellip;</strong>
  </p>
</div>

<div data-ng-hide="loading">
  <h1 class="page-header">{{ dataset.title }}</h1>
  <div class="row">
    <div class="col-sm-3 col-xs-4">
      <div class="weight-badge weight-badge-danger">
        {{ startWeight | number : 0 }}&nbsp;<small>kg</small>
      </div>
    </div>

    <div class="weight-progress-container col-sm-6 col-xs-4">
      <div class="weight-progress-bar">
        <div class="wa-progress-bar" data-min="0" data-max="100"
          data-value="{{ 100 * progress }}"></div>
      </div>
    </div>

    <div class="col-sm-3 col-xs-4">
      <div class="weight-badge weight-badge-success">
        {{ targetWeight | number : 0 }}&nbsp;<small>kg</small>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-6 col-md-8">
      <h3>Weight chart</h3>
      <div class="highchart" id="weightProgress" data-config="weightChartConfig"></div>
    </div>

    <div class="col-sm-6 col-md-4">
      <h3>Update</h3>
      <form name="addMeasurementForm">
        <div class="input-group">
          <input type="numeric" class="form-control" name="weight" placeholder="kilos"
            data-ng-model="measurement.weight" required>
          <span data-ng-click="submitNewMeasurement(measurement)"
              data-ng-disabled="addMeasurementForm.$invalid"
              class="input-group-addon btn btn-default">
            <span class="glyphicon glyphicon-plus"><!-- + --></span> Record
          </span>
        </div>
      </form>

      <h3 class="hidden">Personal data</h3>
      <div class="h3">
        Personal data
        <div class="pull-right">
          <form data-editable-form name="personalDataForm"
              data-blur="cancel"
              data-ng-show="personalDataForm.$visible">
            <button type="button" data-ng-disabled="personalDataForm.$waiting"
                data-ng-click="personalDataForm.$cancel()" class="btn btn-sm btn-default">
              <span class="glyphicon glyphicon-remove"><!-- remove --></span>
              <span class="hidden">Cancel</span>
            </button>
            <button type="submit" data-ng-disabled="personalDataForm.$waiting"
                class="btn btn-sm btn-primary">
              <span class="glyphicon glyphicon-ok"><!-- ok --></span>
              <span class="hidden">Save</span>
            </button>
          </form>
          <button class="btn btn-sm btn-link" data-ng-show="!personalDataForm.$visible"
              data-ng-click="personalDataForm.$show()">
              <span class="text-muted glyphicon glyphicon-pencil"><!-- pencil --></span>
              <span class="hidden">Edit</span>
          </button>
        </div>
      </div>

      <table class="table">
        <tr>
          <td>Height</td>
          <td class="text-right">
            <span data-editable-text="metadata.height" data-e-name="height"
                data-onbeforesave="(+$data > 0) ? null : 'must be a number'"
                data-e-form="personalDataForm" data-e-placeholder="metres"
                data-e-inputmode="numeric" data-e-pattern="[0-9]*(\.[0-9]*)?">
              <span data-ng-show="metadata.height">{{ metadata.height }} <small>m</small></span>
              <span class="text-muted" data-ng-hide="metadata.height">unknown</span>
            </span>
          </td>
        </tr>
      </table>

      <h3>Statistics</h3>
      <table class="table">
        <tr>
          <td>Starting weight <span class="text-muted">(smoothed)</span></td>
          <td class="text-right">{{ startWeight | number : 1 }}&nbsp;<small>kg</small></td>
        </tr>
        <tr>
          <td>Most recent weight <span class="text-muted">(smoothed)</span></td>
          <td class="text-right">{{ endWeight | number : 1 }}&nbsp;<small>kg</small></td>
        </tr>
        <tr>
          <td>Current weight <span class="text-muted">(estimate)</span></td>
          <td class="text-right">{{ currentTrendWeight | number : 1 }}&nbsp;<small>kg</small></td>
        </tr>
        <tr>
          <td>Current loss <span class="text-muted">(estimate)</span></td>
          <td class="text-right">
            {{ startWeight - currentTrendWeight | number : 1 }}&nbsp;<small>kg</small>
            <div class="text-muted">
              {{ progress * 100 | number : 0}}%
              of {{ startWeight - targetWeight | number : 1}}&nbsp;<small>kg</small>
            </div>
          </td>
        </tr>
      </table>
    </div>
  </div>
</div>
